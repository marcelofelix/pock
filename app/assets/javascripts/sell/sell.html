<div >
  <md-autocomplete
    md-selected-item="vm.selectedItem"
    md-search-text="vm.searchText"
    md-items="p in vm.search(vm.searchText)"
    md-min-length="3"
    md-selected-item-change="vm.add(p)"
    md-item-text="p.name">
    <span md-highlight-text="vm.searchText"
      md-highlight-flags="^i">{{p.name}}</span>
    <md-not-found>
      Produto não encontrado
    </md-not-found>
  </md-autocomplete>
  <ul class="list">
    <li class="list__item" ng-repeat="i in vm.itens">
      <header layout="row" layout-align="space-between center">
        <p>{{i.ean}}</p>
        <label ng-show="i.discount">Desc: {{i.discount}}%</label>
      </header>
      <p ng-click="vm.openItem(i)">{{i.name}}</p>
      <footer layout="row" layout-align="space-between">
        <label>Qtd: {{i.count}}</label>
        <label>Preço: {{i.price | currency:'R$ '}}</label>
        <label>{{vm.total(i) | currency:'R$ '}}</label>
      </footer>
      <md-divider ng-if="!$last"></md-divider>
    </li>
  </ul>
  <footer class="page__footer">
    <md-divider></md-divider>
    <div layout="row" layout-align="space-between center">
      <small>Total</small>
      <small>{{vm.totalSell() | currency:'R$ '}}</small>
    </div>
  </footer>
  <md-sidenav class="md-sidenav-right" md-component-id="right">
    <md-toolbar class="md-theme-light">
      <h1 class="md-toolbar-tools" layout="row" layout-align="space-between center">
        <span>{{vm.item.ean}}</span>
        <span>{{vm.total(vm.item) | currency:'R$ '}}</span>
      </h1>
    </md-toolbar>
    <md-content layout="column" layout-padding>
      <p>{{vm.item.name}}</p>
      <md-input-container>
        <label>Quantidade</label>
        <input type="number" ng-model="vm.item.count">
      </md-input-container>
      <md-input-container>
        <label>Preço</label>
        <input ui-money-mask type="text" ng-model="vm.item.price">
      </md-input-container>
      <md-input-container>
        <label>Desconto</label>
        <input type="number" ng-model="vm.item.discount">
      </md-input-container>
      <section layout="row" layout-align="space-between center">
        <md-button class="md-icon-button" aria-label="Cancelar" ng-click="vm.remove(vm.item)">
          <md-icon md-svg-icon="/assets/images/cancel.svg"></md-icon>
        </md-button>
        <md-button class="md-primary" aria-label="Salvar" ng-click="vm.update(vm.item)">Salvar</md-button>
      </section>
    </md-content>
  </md-sidenav>
</div>
